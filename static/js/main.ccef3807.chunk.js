(this["webpackJsonpwoo-image-to-order"]=this["webpackJsonpwoo-image-to-order"]||[]).push([[0],{23:function(e,t,a){},24:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(17),o=a.n(c),s=(a(23),a(24),a(0));function r(){return Object(s.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:Object(s.jsx)("div",{className:"container-fluid",children:Object(s.jsx)("a",{className:"navbar-brand",href:"#",children:"Navbar"})})})}var l=a(3),d=a(2),p=a(5),j=a.n(p),u=a(4),h=a.n(u),b=a(6),m=a(9),x=a(10),f=a(7),O=a(13),g=a(11),v=a(8),y=a.n(v);n.PureComponent,a(16);function w(){return Object(s.jsxs)("svg",{className:"loader",version:"1.1",id:"L9",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 30 30",enableBackground:"new 0 0 0 0",children:[Object(s.jsx)("rect",{x:"0",y:"0",width:"4",height:"10",fill:"#fff",children:Object(s.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0",dur:"0.6s",repeatCount:"indefinite"})}),Object(s.jsx)("rect",{x:"10",y:"0",width:"4",height:"10",fill:"#f0a",children:Object(s.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0.2s",dur:"0.6s",repeatCount:"indefinite"})}),Object(s.jsx)("rect",{x:"20",y:"0",width:"4",height:"10",fill:"#fff",children:Object(s.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0.4s",dur:"0.6s",repeatCount:"indefinite"})})]})}function C(e){var t=Object(n.useContext)(D),a=t.state,i=t.dispatch,c=a.files[e.index],o=Object(n.useRef)(null),r=Object(n.useState)(null),d=Object(l.a)(r,2),p=(d[0],d[1]),j=Object(n.useState)({unit:"px",width:0,height:0,aspect:10/15,x:0,y:0}),u=Object(l.a)(j,2),m=u[0],x=(u[1],Object(n.useState)(!0)),f=Object(l.a)(x,2),O=f[0],g=f[1],v=Object(n.useCallback)((function(t){var n=t.target;o.current=n;var i=[a.files[e.index].options.aspect,n.width,n.height,m.x,m.y],s=i[0],r=i[1],l=i[2],d=i[3],p=i[4];(s=r>l?C(c.options.format,!0):C(c.options.format))>1?(l=r/s,d=0,(p=(n.height-l)/2)<0&&(r=(l=n.height)*s,d=(n.width-r)/2,p=0)):(r=l*s,d=(n.width-r)/2,p=0);var j={naturalWidth:o.current.width,naturalHeight:o.current.height,unit:"px",aspect:s,width:r,height:l,x:d,y:p};return F(j),N(j),g(!1),!1}),[]),C=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.split("x");return t?a[1]/a[0]:a[0]/a[1]},N=function(){var t=Object(b.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o&&a.width&&a.height&&(n=k(o.current,a,"newFile.jpeg"))&&n.then((function(t){var a=c.options;a.preCrop=t,i({type:"updateOptions",payload:{index:e.index,options:a}})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(e,t,a){if(null===e)return!1;var n=document.createElement("canvas"),i=window.devicePixelRatio,c=e.naturalWidth/e.width,o=e.naturalHeight/e.height,s=n.getContext("2d");return n.width=t.width*i*c,n.height=t.height*i*o,s.setTransform(i,0,0,i,0,0),s.imageSmoothingQuality="high",s.drawImage(e,t.x*c,t.y*o,t.width*c,t.height*o,0,0,t.width*c,t.height*o),new Promise((function(e,t){n.toBlob((function(t){if(t){var a=window.URL.createObjectURL(t);p(a,e(a))}}),"image/jpg",1)}))},F=function(t){t.naturalWidth=o.current.width,t.naturalHeight=o.current.height,i({type:"changeCrop",payload:{crop:t,index:e.index}}),console.log("change")};return Object(n.useEffect)((function(){var t=o.current;c.options.rotate=!c.options.rotate,t.width>t.height&&i({type:"changeCrop",payload:{options:c.options,index:e.index}})}),[o]),Object(n.useEffect)((function(){N(a.files[e.index].options.crop),console.log("3")}),[a.files[e.index].options.rotate,a.files[e.index].options.cadr]),Object(s.jsxs)(s.Fragment,{children:[O&&Object(s.jsx)(w,{}),Object(s.jsx)(y.a,{crop:a.files[e.index].options.crop,disabled:a.files[e.index].options.cadr,onChange:function(e){return F(e)},onComplete:function(e){N(e)},renderComponent:o?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"overlay","is-loaded":o.current?1:0,children:Object(s.jsx)(w,{})}),Object(s.jsx)("div",{className:"img-wrapper",children:Object(s.jsx)("img",{src:c.body,onLoadStart:function(){return g(!0)},onLoad:function(e){return c.options.cadr?console.log(c.options.cadr):v(e)},ref:o,className:"ReactCrop__image",alt:""})})]}):null})]})}function N(e){var t=Object(n.useContext)(D),a=t.state,i=t.dispatch,c=Object(n.useState)("default"),o=Object(l.a)(c,2),r=o[0],d=o[1],p=e.o,u=Object(n.useState)(p.count),h=Object(l.a)(u,2);h[0],h[1];switch(r){case"default":return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{onClick:function(){d("formats")},className:"item-option item-option--linear o format",children:[Object(s.jsx)(j.a,{name:"lni lni-ruler-alt"}),"\xa0",p.format?p.format:"\u041d\u0435\u0442"]}),Object(s.jsxs)("div",{onClick:function(){d("paper")},className:"item-option item-option--linear o paper",children:[Object(s.jsx)(j.a,{name:"lni lni-write"}),"\xa0",p.paper?p.paper:"\u041d\u0435\u0442"]}),Object(s.jsxs)("div",{onClick:function(){d("crop")},className:"item-option item-option--linear o crop",children:[Object(s.jsx)(j.a,{name:"lni lni-crop"}),"\xa0",p.cadr?"\u0414\u0430":"\u041d\u0435\u0442"]}),Object(s.jsxs)("div",{onClick:function(){d("count")},className:"item-option item-option--linear o count",children:[Object(s.jsx)(j.a,{name:"lni lni-shopping-basket"}),"\xa0",p.count?p.count:"\u041d\u0435\u0442"]})]});case"formats":var b=a.formatList.map((function(t,a){return Object(s.jsx)(k,{action:"changeFormat",mod:"",f:t,nav:d,index:e.index},a)}));return b.push(Object(s.jsx)(k,{f:"\u043d\u0430\u0437\u0430\u0434",nav:d,index:"back"},"default")),b;case"paper":var m=a.paperList.map((function(t,a){return Object(s.jsx)(k,{action:"changePaper",mod:"",f:t,nav:d,index:e.index},a)}));return m.push(Object(s.jsx)(k,{f:"\u043d\u0430\u0437\u0430\u0434",nav:d,mod:"to-back",index:"back"},"default")),m;case"crop":return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(k,{action:"changeCadr",mod:"",f:!1,label:"\u041d\u0435\u0442",nav:d,index:e.index},"n"),Object(s.jsx)(k,{action:"changeCadr",mod:"",f:!0,label:"\u0414\u0430",nav:d,index:e.index},"y"),Object(s.jsx)(k,{f:"\u043d\u0430\u0437\u0430\u0434",nav:d,mod:"to-back",index:"back"},"default")]});case"count":var x=function(t){var a=-1;t&&(a=1),i({type:"changeCount",payload:{index:e.index,format:+p.count+a}})};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"item-count",children:p.count}),Object(s.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(s.jsx)("div",{onClick:function(){return x()},className:"item-option",children:Object(s.jsx)(j.a,{name:"minus"})}),Object(s.jsx)("div",{onClick:function(){return x(!0)},className:"item-option",children:Object(s.jsx)(j.a,{name:"plus"})})]}),Object(s.jsx)(k,{f:"\u043d\u0430\u0437\u0430\u0434",nav:d,mod:"to-back",index:"back"},"default")]});default:return null}}function k(e){var t=Object(n.useContext)(D),a=(t.state,t.dispatch),i="string"===typeof e.f?e.f:e.label;return Object(s.jsx)("button",{onClick:function(){"back"!==e.index&&a({type:e.action,payload:{index:e.index,format:e.f}}),e.nav("default")},className:"item-option item-option--linear ".concat(e.mod),children:i})}function F(e){var t=Object(n.useContext)(D),a=t.state,i=t.dispatch,c=a.files[e.index].options;return void 0===c?null:Object(s.jsxs)("div",{onClick:function(){a.changeMod&&(c.changed=!c.changed,i({type:"updateOptions",payload:{index:e.index,options:c}}))},className:"file d-flex",children:[Object(s.jsx)(C,{index:e.index}),Object(s.jsxs)("div",{className:"file-options",children:[Object(s.jsx)(N,{index:e.index,o:c}),Object(s.jsx)("div",{className:"delimeter"}),Object(s.jsx)(M,{index:e.index,remove:function(){return i({type:"remove",payload:e.index})},rotate:function(){i({type:"rotate",payload:{index:e.index,r:!c.rotate}})}})]}),c.changed&&Object(s.jsx)("div",{className:"redact",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f"})]})}function M(e){var t=Object(n.useContext)(D),a=(t.state,t.dispatch);return Object(s.jsxs)("div",{className:"item-option-list",children:[Object(s.jsx)(I,{actionFunction:e.rotate,iconClass:"lni lni-spinner-arrow",itemClass:"rotate",index:e.index}),Object(s.jsx)(I,{actionFunction:function(){return a({type:"remove",payload:e.index})},iconClass:"lni lni-close",itemClass:"close",index:e.index})]})}function I(e){var t=Object(d.a)({},e),a=t.actionFunction,n=t.iconClass,i=t.itemClass;return Object(s.jsx)("div",{onClick:a,className:"item-option ".concat(i),children:Object(s.jsx)(j.a,{name:n})})}var L=function(){var e=Object(n.useContext)(D),t=e.state;return e.dispatch,function(){var e=t.files.map((function(e,t){if(e)return Object(s.jsx)(F,{index:t},e.id)}));return e.length<=0&&(e="\u043d\u0435\u0442 \u0444\u043e\u0442\u043e"),Object(s.jsx)("div",{className:"list mt-3","change-mod":t.changeMod?1:0,children:e})}()},S=a(18);function R(e){var t=Object(n.useContext)(D),a=t.state,i=t.dispatch,c=Object(n.useRef)();return a.changeMod||a.afterAddFilesMod?Object(s.jsx)("div",{className:"file-options-form-wrapper ".concat(a.afterAddFilesMod?"popup":""),children:Object(s.jsx)("div",{className:"card text-dark bg-light border-secondary file-options-form",children:Object(s.jsxs)("form",{ref:c,children:[Object(s.jsxs)("div",{className:"card-header d-flex align-items-center justify-content-between",children:["\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",a.afterAddFilesMod&&Object(s.jsx)("button",{type:"button",className:"btn-close"})]}),Object(s.jsxs)("div",{className:"card-body",children:[!a.afterAddFilesMod&&Object(s.jsx)(U,{}),a.afterAddFilesMod&&Object(s.jsx)("div",{className:"alert alert-primary",role:"alert",children:"\u041f\u043e\u043a\u0430 \u0412\u0430\u0448\u0438 \u0444\u043e\u0442\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f, \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432 \u0444\u043e\u0440\u043c\u0435 \u043d\u0438\u0436\u0435."}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{forhtml:"exampleSelect1",className:"form-label mt-4",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u043e\u0442\u043e"}),Object(s.jsxs)("select",{className:"form-select",name:"format",id:"exampleSelect1",required:!0,children:[Object(s.jsx)("option",{disabled:!0,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"}),Object(s.jsx)("option",{value:"10x15",children:"10x15"}),Object(s.jsx)("option",{value:"15x20",children:"15x20"}),Object(s.jsx)("option",{value:"20x30",children:"20x30"})]})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{forhtml:"exampleSelect2",className:"form-label mt-4",children:"\u0422\u0438\u043f \u0431\u0443\u043c\u0430\u0433\u0438"}),Object(s.jsxs)("select",{className:"form-select",name:"paper",id:"exampleSelect2",required:!0,children:[Object(s.jsx)("option",{disabled:!0,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"}),Object(s.jsx)("option",{value:"\u043c\u0430\u0442\u043e\u0432\u0430\u044f",children:"\u041c\u0430\u0442\u043e\u0432\u0430\u044f"}),Object(s.jsx)("option",{value:"\u0433\u043b\u044f\u043d\u0435\u0446",children:"\u0413\u043b\u044f\u043d\u0435\u0446"})]})]}),Object(s.jsx)("div",{className:"form-group mt-3",children:Object(s.jsxs)("div",{className:"form-check form-switch",children:[Object(s.jsx)("label",{className:"form-check-label",forhtml:"flexSwitchCheckDefault",children:"\u041a\u0430\u0434\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(s.jsx)("input",{className:"form-check-input",name:"cadr",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"})]})}),Object(s.jsxs)("div",{className:"mt-3",children:[Object(s.jsx)("label",{forhtml:"exampleFormControlInput3",className:"form-label",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(s.jsx)("input",{type:"number",name:"count",className:"form-control",id:"exampleFormControlInput3",defaultValue:"1"})]})]}),Object(s.jsx)("div",{className:"card-footer d-flex justify-content-end",children:Object(s.jsx)("div",{onClick:function(e){var t,a=e.target.closest("form"),n=new FormData(a),c=[],o=Object(S.a)(n);try{for(o.s();!(t=o.n()).done;){var s=Object(l.a)(t.value,2),r=s[0],d=s[1];c.push({name:r,value:d})}}catch(p){o.e(p)}finally{o.f()}i({type:"massSetFilesOptions",payload:c})},className:"btn btn-success",children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})})]})})}):null}function U(e){var t=Object(n.useContext)(D),a=t.state,i=(t.dispatch,null);return a.files&&(i=a.files.map((function(e){return!!(e&&e.options&&e.options.changed)&&Object(s.jsx)("div",{className:"changed-files-list-item",style:{backgroundImage:"url(".concat(window.URL.createObjectURL(e.file),")")}},e.id)}))).length>0?Object(s.jsx)("div",{className:"changed-file-list",children:i}):null}var T=function(e){Object(O.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onImageLoaded=function(e){n.imageRef=e},n.onCropComplete=function(e){n.makeClientCrop(e)},n.onCropChange=function(e,t){n.setState({crop:e})},n.state={src:"",crop:{unit:"%",width:"100",aspect:2/3}},n.save=n.save.bind(Object(f.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.file,t=e.options.cropped?e.options.cropped:window.URL.createObjectURL(this.props.file.file);this.setState({src:t})}},{key:"componentWillUnmount",value:function(){var e=this.props.file,t=e.options.cropped?e.options.cropped:window.URL.createObjectURL(this.props.file.file);this.setState({src:t})}},{key:"makeClientCrop",value:function(){var e=Object(b.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 3:a=e.sent,this.setState({croppedImageUrl:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,a){var n=this,i=document.createElement("canvas"),c=window.devicePixelRatio,o=e.naturalWidth/e.width,s=e.naturalHeight/e.height,r=i.getContext("2d");return i.width=t.width*c*o,i.height=t.height*c*s,r.setTransform(c,0,0,c,0,0),r.imageSmoothingQuality="high",r.drawImage(e,t.x*o,t.y*s,t.width*o,t.height*s,0,0,t.width*o,t.height*s),new Promise((function(e,t){n.fileUrl=i.toDataURL(),e(n.fileUrl)}))}},{key:"close",value:function(){this.props.setSetupImageMod(null)}},{key:"save",value:function(){var e=this.state.croppedImageUrl,t=this.props.fileIndex;this.props.upd("cropped",e,t),this.setState({src:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.crop,n=t.src,i=t.croppedImageUrl,c=this.props,o=c.fileIndex,r=c.file;return Object(s.jsx)("div",{className:"modal fade show",id:"file-direction",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"false",children:Object(s.jsx)("div",{className:"modal-dialog",role:"document",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",id:"file-direction-label",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u043c"}),Object(s.jsx)("button",{onClick:this.props.closeModal,type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(s.jsx)("div",{className:"modal-body",children:Object(s.jsx)("div",{className:"container-fluid",children:Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-md-8 react-crop-wrapper-row",children:Object(s.jsx)("div",{className:"react-crop-wrapper",children:n&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"item-option-list",children:[Object(s.jsx)(I,{actionFunction:function(){return e.props.upd("rotate",!r.options.rotate,o)},iconClass:"lni lni-ruler-alt",itemClass:"rotate",index:this.props.fileIndex}),Object(s.jsx)(I,{actionFunction:function(){return e.props.upd("rotate",!r.options.rotate,o)},iconClass:"lni lni-spinner-arrow",itemClass:"rotate",index:this.props.fileIndex})]}),Object(s.jsx)(y.a,{src:n,crop:a,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange})]})})}),Object(s.jsx)("div",{className:"col-md-4 react-crop-options-bar",children:n&&Object(s.jsxs)("div",{className:"file-direction__crop",children:[Object(s.jsx)("span",{children:"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"}),Object(s.jsx)("img",{src:i,alt:""})]})})]})})}),Object(s.jsxs)("div",{className:"modal-footer",children:[Object(s.jsx)("button",{onClick:this.props.closeModal,type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(s.jsx)("button",{onClick:this.save,type:"button",className:"btn btn-primary",children:"\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c"})]})]})})})}}]),a}(n.PureComponent);function W(e,t){var a,n=e.files;switch(t.type){case"add":for(var i=t.payload,c=[],o=0;o<i.length;o++){var s={id:H(a=i[o]),file:a,body:URL.createObjectURL(a),options:{count:1,format:"10x15",paper:"\u043c\u0430\u0442\u043e\u0432\u0430\u044f",cadr:!1,rotate:!1,changed:!0,cropped:[],aspect:10/15,crop:{}}};c.push(s)}return Object(d.a)(Object(d.a)({},e),{},{files:n.concat(c),afterAddFilesMod:!0});case"remove":return n.splice(t.payload,1,null),Object(d.a)(Object(d.a)({},e),{},{files:n});case"updateOptions":return n[t.payload.index].options=t.payload.options,Object(d.a)(Object(d.a)({},e),{},{files:n});case"changeCrop":return n[t.payload.index].options.crop=t.payload.crop,Object(d.a)(Object(d.a)({},e),{},{files:n});case"rotate":return n[t.payload.index].options.rotate=t.payload.r,n[t.payload.index].options.crop=A(n[t.payload.index].options.cadr,n[t.payload.index].options.crop,n[t.payload.index].options.format,t.payload.r),Object(d.a)(Object(d.a)({},e),{},{files:n});case"changeFormat":n[t.payload.index].options.format=t.payload.format;var r=n[t.payload.index].options.rotate;return n[t.payload.index].options.crop=A(n[t.payload.index].options.cadr,n[t.payload.index].options.crop,n[t.payload.index].options.format,r),Object(d.a)(Object(d.a)({},e),{},{files:n});case"changePaper":return n[t.payload.index].options.paper=t.payload.format,Object(d.a)(Object(d.a)({},e),{},{files:n});case"changeCadr":return n[t.payload.index].options.cadr=t.payload.format,n[t.payload.index].options.crop=A(n[t.payload.index].options.cadr,n[t.payload.index].options.crop,n[t.payload.index].options.format,n[t.payload.index].options.rotate),Object(d.a)(Object(d.a)({},e),{},{files:n});case"changeCount":return n[t.payload.index].options.count=t.payload.format,Object(d.a)(Object(d.a)({},e),{},{files:n});case"crop":return n[t.payload].options.cropped.push(n[t.payload].options.preCrop),Object(d.a)(Object(d.a)({},e),{},{files:n});case"setChangingMod":var l=e.files;return e.changeMod&&l.forEach((function(e){e&&(e.options.changed=!1)})),Object(d.a)(Object(d.a)({},e),{},{files:l,changeMod:!e.changeMod});case"massSetFilesOptions":var p=t.payload;return e.files.forEach((function(t){t&&t.options.changed&&(p.forEach((function(e){t.options[e.name]=e.value})),p.findIndex((function(e){return"cadr"===e.name}))<0&&(t.options.cadr=!1),e.afterAddFilesMod&&(t.options.changed=!1))})),e.afterAddFilesMod&&(e.afterAddFilesMod=!e.afterAddFilesMod),Object(d.a)(Object(d.a)({},e),{},{files:e.files});default:throw new Error}}function H(e){return e.size+"_"+e.name}var A=function(e,t,a,n){var i=a.split("x");return n?(t.aspect=i[1]/i[0],t.height=t.naturalHeight,t.y=0,t.width=t.naturalHeight*t.aspect,t.x=(t.naturalWidth-t.width)/2,t.width>t.naturalWidth&&!e&&(t.width=t.naturalWidth,t.x=0,t.height=t.naturalWidth*t.aspect,t.y=(t.naturalHeight-t.height)/2)):(t.aspect=i[0]/i[1],t.width=t.naturalWidth,t.x=0,t.height=t.naturalWidth*t.aspect,t.y=(t.naturalHeight-t.height)/2,t.height>t.naturalHeight&&(t.height=t.naturalHeight,t.y=0,t.width=t.naturalHeight*t.aspect,t.x=(t.naturalWidth-t.width)/2)),e&&(t.width=t.naturalWidth,t.height=t.width/t.aspect,t.x=0,t.y=(t.naturalHeight-t.height)/2),t};function P(e){var t=Object(n.useContext)(D),a=t.state,i=(t.dispatch,a.files.map((function(e,t){return e&&Object(s.jsx)(E,{index:t},t)})));return Object(s.jsx)("div",{className:"cart",children:i})}function E(e){var t=Object(n.useContext)(D),a=t.state,i=(t.dispatch,a.files[e.index]);return Object(s.jsx)("img",{src:i.options.preCrop,alt:""})}var D=Object(n.createContext)(null);function B(){var e=Object(n.useReducer)(W,{files:[],formatList:["10x15","15x20","20x30"],paperList:["\u0433\u043b\u044f\u043d\u0435\u0446","\u043c\u0430\u0442\u043e\u0432\u044b\u0439"],changeMod:!1,setupImageMod:null,lastModifiedTime:(new Date).getTime(),afterAddFilesMod:!1}),t=Object(l.a)(e,2),a=t[0],i=t[1];return Object(s.jsxs)(D.Provider,{value:{state:a,dispatch:i},children:[Object(s.jsx)(_,{}),"number"===typeof setupImageMod&&Object(s.jsx)(T,{fileIndex:a.setupImageMod})]})}function _(e){var t=Object(n.useContext)(D),a=t.state,i=t.dispatch;return Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-12 col-lg-".concat(a.changeMod?10:12),children:Object(s.jsxs)("div",{className:"card border-secondary my-3",children:[Object(s.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:["\u0412\u0430\u0448\u0438 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438: ",a.files.length,Object(s.jsx)(q,{modOn:a.changeMod,setChangingMod:a.setChangingMod})]}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsxs)("div",{className:"image-list",children:[Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e"}),Object(s.jsx)("input",{onChange:function(e){i({type:"add",payload:e.target.files})},className:"form-control",type:"file",multiple:!0})]}),Object(s.jsx)(L,{})]}),Object(s.jsx)(P,{})]}),Object(s.jsx)("div",{className:"card-footer d-flex justify-content-end",children:Object(s.jsx)("div",{className:"btn btn-success disabled",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u0430"})})]})}),Object(s.jsx)("div",{className:"col-12 col-lg-2",children:Object(s.jsx)(R,{})})]})}function q(e){var t=Object(n.useContext)(D),a=t.state,i=t.dispatch,c="\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e";a.changeMod&&(c="\u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c");return Object(s.jsx)("div",{onClick:function(){i({type:"setChangingMod"})},className:"btn btn-info text-white",children:c})}var J=function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(r,{}),Object(s.jsx)(B,{})]})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,40)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),c(e),o(e)}))};o.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(J,{})}),document.getElementById("root")),Q()}},[[38,1,2]]]);
//# sourceMappingURL=main.ccef3807.chunk.js.map